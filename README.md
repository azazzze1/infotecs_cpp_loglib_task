# Задание на стажировку в ИнфоТеКС на должность "Разработчик С++" — Шушков Егор
## Задание
[Ссылка на задание в формате pdf](https://career.infotecs.ru/upload/iblock/c2a/r5j2ceovb1ik54zstamj03pfchu3afha/Razrabotchik-C_-v5.pdf)

## Документация
Для просмотра Doxygen документации из корня проекта:
```bash
firefox documentation/html/index.html
```

## Сборка проекта
Выполните команды из корня проекта:
- Для статической сборки библиотеки логирования: 
```bash
mkdir build
cd build
cmake .. && make
```
- Для динамической сборки библиотеки логирования:
```bash
mkdir build
cd build
cmake -DBUILD_SHARED_LIB=ON .. && make
```

В папке build соберётся 4 цели в директориях:
- logger — Часть 1. Хранит собранную библиотеку.
- logger_test_app — Часть 2. Приложение для тестирования библиотеки (отправка логов).
- socket_stats_app — Часть 3. Приложение для сбора статистики логов из сокета.
- tests — Юнит тесты (неполные). 

## Использование
Перед началом работы с приложениями можно запустить тестовый сокет. Запущенный тестовый сокет нужен для работы логирования в сокет и считывания из него. Для этого из корня проекта:
```bash
cd server/
./server

TCP-сервер запущен на порту 12345. Ожидание клиентов...
```

> [!CAUTION]
> Сначала подключается приложение logger_test_app для отправки логов, после чего socket_stats_app для получения логов. 

### logger_test_app
Имеет два варианта запуска:
- ./logger_test_app <уровень важности лога> <имя файла для логирования> — запускает логирование в файл.
- ./logger_test_app <уровень важности лога> <IP-адрес сокета> <Порт сокета> — запускает логирование в сокет (необходимо для Части 3).

Доступные уровни логирования: **INFO, WARNING, ERROR**. 

Примеры запуска:
```bash
./logger_test INFO test_log.log
./logger_test WARNING 127.0.0.1 12345
```

Поддерживаются следующий команды:
- log <уровень важности> <сообщение> — отправка лога в файл\сокет с указанием уровня важности.
- log <сообщение> — отправка с уровнем по умолчанию.
- setlevel <уровень важности> — изменение уровня по умолчанию. 
- exit — выход из приложения.

Пример использования программы:
```bash
~log INFO message text 
```

Пример полученного лога:
```
[Fri Jul 18 13:29:55 2025] [INFO] message text
```

### socket_stats_app
Запуск:
- ./socket_stats_app <IP-адрес сокета> <Порт сокета> <N> <T> 
   
Пример запуска приложения:
```bash
./socket_stats_app 127.0.0.1 12345 3 60
```

Приложение получает логи от сокета и выводит статистику. Пример статистики:
```
   Статистика по количеству сообщений
        Всего сообщений: 3
        Сообщений уровня INFO: 3
        Сообщений уровня WARNING: 0
        Сообщений уровня ERROR: 0
        Сообщений за последний час: 3
    Статистика по длине сообщений
        Минимальная длина: 1
        Максимальная длина: 3
        Средняя длина: 2
```

### tests
Запуск:
- ./tests

Тесты написаны с использованием библиотеки gtest. 
